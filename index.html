<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒˆì‹¹ ì˜ì„±ì§€ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --spring-pink: #ffebee;
            --spring-green: #e8f5e9;
            --point-color: #ff8a80;
            --text-color: #4e342e;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background: linear-gradient(135deg, var(--spring-pink), var(--spring-green));
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #app {
            width: 90%;
            max-width: 450px;
            background: rgba(255, 255, 255, 0.92);
            padding: 2.5rem 1.5rem;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.05);
            text-align: center;
            position: relative;
        }

        .page { display: none; animation: fadeIn 0.6s ease-out; }
        .page.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h1 { font-size: 1.4rem; line-height: 1.6; color: #d81b60; margin-bottom: 2rem; }
        h2 { font-size: 1.3rem; margin-bottom: 1rem; color: #2e7d32; }

        .btn {
            background-color: var(--point-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 5px;
            transition: 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .btn-secondary { background-color: #90a4ae; }
        .btn:hover { transform: scale(1.05); opacity: 0.9; }

        #progress { font-weight: bold; color: #ef5350; margin-bottom: 15px; }
        .question-text { font-size: 1.15rem; margin-bottom: 2rem; line-height: 1.5; word-break: keep-all; min-height: 3.5rem; }
        .options { display: flex; justify-content: space-between; margin-bottom: 2rem; }
        .option-item { display: flex; flex-direction: column; align-items: center; font-size: 0.8rem; cursor: pointer; }
        .option-item input { display: none; }
        .dot {
            width: 45px; height: 45px; border: 2px solid #ffcdd2;
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; margin-bottom: 8px; font-weight: bold; background: white;
        }
        input:checked + .dot { background-color: var(--point-color); border-color: var(--point-color); color: white; }

        .result-list { text-align: left; margin: 1rem auto; display: inline-block; }
        .result-item { margin: 8px 0; font-size: 1.05rem; }
        .total-score { font-size: 1.2rem; font-weight: bold; color: #d81b60; margin-top: 15px; border-top: 2px dashed #ffcdd2; padding-top: 10px; }

        .guide-box { text-align: left; background: #fffde7; padding: 1.5rem; border-radius: 20px; border-left: 5px solid #fff176; margin-top: 1rem; line-height: 1.6; }
        .comment-text { font-style: italic; color: #ef5350; margin-bottom: 15px; font-weight: bold; }
        .recommend-title { margin-top: 15px; color: #2e7d32; font-weight: bold; border-bottom: 1px solid #eee; padding-bottom: 5px; }

        .citation { position: absolute; bottom: 10px; right: 15px; font-size: 7px; color: #bbb; text-align: right; pointer-events: none; }
        footer { font-size: 0.9rem; color: #888; margin-top: 2rem; }
    </style>
</head>
<body>

<div id="app">
    <div id="page1" class="page active">
        <h1>í•˜ì›Œë“œ ê°€ë“œë„ˆì˜ ë‹¤ì¤‘ì§€ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ”<br>ì˜ì„±ì§€ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
        <button class="btn" onclick="nextPage(2)">ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”</button>
        <footer>BANYOUNGHUN</footer>
    </div>

    <div id="page2" class="page">
        <div id="progress">1 / 20</div>
        <div id="question-container">
            <p class="question-text" id="q-text"></p>
            <div class="options">
                <label class="option-item"><input type="radio" name="score" value="1"><span class="dot">1</span>ì „í˜€ì•„ë‹˜</label>
                <label class="option-item"><input type="radio" name="score" value="2"><span class="dot">2</span></label>
                <label class="option-item"><input type="radio" name="score" value="3"><span class="dot">3</span></label>
                <label class="option-item"><input type="radio" name="score" value="4"><span class="dot">4</span></label>
                <label class="option-item"><input type="radio" name="score" value="5"><span class="dot">5</span>ë§¤ìš°ê·¸ëŸ¼</label>
            </div>
        </div>
        <div style="display: flex; justify-content: center;">
            <button class="btn btn-secondary" onclick="handlePrev()">ì´ì „ìœ¼ë¡œ</button>
            <button class="btn" onclick="handleNext()">ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸°</button>
        </div>
        <div class="citation">Inventory: King, D, B. & DeCicco, T. L. (2009). A viable model and self-report measure of spiritual intelligence. Ranspersonal Studies.</div>
    </div>

    <div id="page3" class="page">
        <h2>ì˜ì„±ì§€ëŠ¥ ê²°ê³¼ ë¦¬í¬íŠ¸</h2>
        <canvas id="radarChart" style="max-height: 230px;"></canvas>
        <div id="text-results" class="result-list"></div>
        <div id="total-score-display" class="total-score"></div>
        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="copyResult()">ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
        <button class="btn btn-secondary" style="width: 100%;" onclick="nextPage(4)">ì„±ì¥ ê°€ì´ë“œ ë³´ê¸°</button>
    </div>

    <div id="page4" class="page">
        <h2>ì˜ì„±ì§€ëŠ¥ ì„±ì¥ì„ ìœ„í•œ ì•½ì†</h2>
        <div id="guide-content" class="guide-box">
            </div>
        <div style="display: flex; justify-content: center; margin-top: 20px;">
            <button class="btn btn-secondary" onclick="nextPage(3)">ì´ì „ìœ¼ë¡œ</button>
            <button class="btn" onclick="location.reload()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        </div>
    </div>
</div>

<script>
    const questions = [
        { factor: 'CET', text: "ì„¸ìƒì€ ì–´ë–»ê²Œ ìƒê²¨ë‚¬ëŠ”ì§€, ì£½ìœ¼ë©´ ì–´ë–»ê²Œ ë ì§€ ìì£¼ ê¶ê¸ˆí•´í•´ìš”." },
        { factor: 'CET', text: "ì‚¬ëŒì€ ì™œ ì‚¬ëŠ”ì§€, ë‚˜ëŠ” ì™œ íƒœì–´ë‚¬ëŠ”ì§€ ë‚˜ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬¼ì–´ë´ìš”." },
        { factor: 'CET', text: "ì„±ê²½ ë§ì”€(ì‹œí¸ 127:1)ì²˜ëŸ¼ ë‚´ ë§ˆìŒì˜ ì£¼ì¸ì€ ëˆ„êµ¬ì¸ì§€ ê¹Šì´ ìƒê°í•´ìš”." },
        { factor: 'CET', text: "í˜ë“  ì¼ì´ ìƒê²¼ì„ ë•Œ, ì´ ì¼ì´ ë‚˜ì—ê²Œ ì–´ë–¤ ê°€ë¥´ì¹¨ì„ ì£¼ëŠ”ì§€ ê³ ë¯¼í•´ìš”." },
        { factor: 'CET', text: "ëˆˆì— ë³´ì´ëŠ” ê²ƒë³´ë‹¤ ë” ì†Œì¤‘í•œ ìƒëª…ì˜ ë¹„ë°€ì— ëŒ€í•´ ì•Œê³  ì‹¶ì–´í•´ìš”." },
        { factor: 'PME', text: "ë‚˜ëŠ” í‰ë²”í•œ í•˜ë£¨ ì†ì—ì„œë„ ì†Œì¤‘í•œ ê¸°ì¨ê³¼ ì˜ë¯¸ë¥¼ ì˜ ì°¾ì•„ë‚´ìš”." },
        { factor: 'PME', text: "ë‚´ê°€ í•˜ëŠ” ëª¨ë“  ì¼ì´ ë‚˜ì¤‘ì— ë” ë©‹ì§„ ì¼ì´ ë  ê±°ë¼ê³  ë¯¿ì–´ìš”." },
        { factor: 'PME', text: "ì„±ê²½ ë§ì”€(ë¡œë§ˆì„œ 8:28)ì²˜ëŸ¼ ëª¨ë“  ìƒí™©ì—ì„œ ì¢‹ì€ ì˜ë¯¸ë¥¼ ì°¾ìœ¼ë ¤ í•´ìš”." },
        { factor: 'PME', text: "ì‹¤íŒ¨í•˜ê±°ë‚˜ ì†ìƒí•´ë„ ë‹¤ì‹œ ì¼ì–´ë‚˜ì„œ ì„±ì¥í•  ìˆ˜ ìˆëŠ” í˜ì´ ìˆì–´ìš”." },
        { factor: 'PME', text: "ë‚´ ì‚¶ì—ëŠ” í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  íŠ¹ë³„í•œ ì•½ì†ê³¼ ê³„íšì´ ìˆë‹¤ê³  ë¯¿ì–´ìš”." },
        { factor: 'TA', text: "ìš°ë¦¬ê°€ ì‚¬ëŠ” ì„¸ìƒ ë„ˆë¨¸ì— ì‹ ë¹„ë¡­ê³  ì˜ì ì¸ ì„¸ê³„ê°€ ìˆìŒì„ ëŠê»´ìš”." },
        { factor: 'TA', text: "ëª¨ë“  ì‚¬ëŒê³¼ ìì—°ì´ ì„œë¡œ ì†Œì¤‘í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆë‹¤ëŠ” ê±¸ ëŠê»´ìš”." },
        { factor: 'TA', text: "ì„±ê²½ ë§ì”€(ì‹œí¸ 19:1)ì²˜ëŸ¼ ìì—°ì„ ë³´ë©° í•˜ë‚˜ë‹˜ì˜ ì†œì”¨ë¥¼ ëŠê»´ìš”." },
        { factor: 'TA', text: "ë‚˜ë³´ë‹¤ ë” í¬ê³  í˜ì´ ì„¼ ì¡´ì¬ê°€ ë‚˜ë¥¼ ì§€ì¼œì£¼ê³  ë„ì™€ì¤€ë‹¤ê³  ëŠê»´ìš”." },
        { factor: 'TA', text: "ë³´ì´ì§€ ì•ŠëŠ” í˜ì´ ë‚´ ë§ˆìŒê³¼ í–‰ë™ì— ì¢‹ì€ ì˜í–¥ì„ ì¤€ë‹¤ê³  ë¯¿ì–´ìš”." },
        { factor: 'CSE', text: "ê¸°ë„ë‚˜ ì¡°ìš©í•œ ëª…ìƒì„ í•  ë•Œ ë§ˆìŒì´ ì•„ì£¼ í‰ì˜¨í•´ì§€ëŠ” ê±¸ ê²½í—˜í•´ìš”." },
        { factor: 'CSE', text: "ì˜ì ì¸ ì¼ì— ì§‘ì¤‘í•  ë•Œ ì‹œê°„ ê°€ëŠ” ì¤„ ëª¨ë¥¼ ì •ë„ë¡œ ëª°ì…í•˜ê³¤ í•´ìš”." },
        { factor: 'CSE', text: "ì„±ê²½ ë§ì”€(ì˜ˆë ˆë¯¸ì•¼ 33:3)ì²˜ëŸ¼ ê¸°ë„ ì¤‘ì— ë†€ë¼ìš´ ê¹¨ë‹¬ìŒì„ ì–»ì–´ìš”." },
        { factor: 'CSE', text: "ë§ˆìŒì´ ë³µì¡í•  ë•Œ ìŠ¤ìŠ¤ë¡œ ë§ˆìŒì„ ì •ëˆí•´ì„œ í‰í™”ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ìš”." },
        { factor: 'CSE', text: "ê¸°ë„ë‚˜ ì˜ì„± í™œë™ì„ í•˜ê³  ë‚˜ë©´ ë§ˆìŒì´ ë§‘ì•„ì§€ê³  ìƒˆë¡œìš´ ìƒê°ì´ ë– ì˜¬ë¼ìš”." }
    ];

    let currentIdx = 0;
    let userScores = Array(20).fill(0);
    let chartInstance = null;

    function nextPage(pageNum) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page' + pageNum).classList.add('active');
        if(pageNum === 2) showQuestion();
        if(pageNum === 3) showResult();
        if(pageNum === 4) showGuide();
    }

    function showQuestion() {
        document.getElementById('progress').innerText = `${currentIdx + 1} / 20`;
        document.getElementById('q-text').innerText = questions[currentIdx].text;
        const prevValue = userScores[currentIdx];
        document.querySelectorAll('input[name="score"]').forEach(rb => {
            rb.checked = (parseInt(rb.value) === prevValue);
        });
    }

    function handleNext() {
        const selected = document.querySelector('input[name="score"]:checked');
        if(!selected) { alert("ë²ˆí˜¸ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”!"); return; }
        userScores[currentIdx] = parseInt(selected.value);
        if(currentIdx < questions.length - 1) {
            currentIdx++;
            showQuestion();
        } else {
            nextPage(3);
        }
    }

    function handlePrev() {
        if(currentIdx > 0) {
            currentIdx--;
            showQuestion();
        } else {
            nextPage(1);
        }
    }

    function getLevel(score) {
        if(score >= 4.5) return "<span style='color:#e91e63'>ë§¤ìš° ë†’ìŒ</span>";
        if(score >= 3.5) return "<span style='color:#4caf50'>ë†’ìŒ</span>";
        if(score >= 2.5) return "<span style='color:#fb8c00'>ì¤‘ê°„</span>";
        return "<span style='color:#9e9e9e'>ë‚®ìŒ</span>";
    }

    function showResult() {
        const factors = { CET:0, PME:0, TA:0, CSE:0 };
        userScores.forEach((s, i) => factors[questions[i].factor] += s);
        const avgScores = { CET: factors.CET/5, PME: factors.PME/5, TA: factors.TA/5, CSE: factors.CSE/5 };
        const totalScore = userScores.reduce((a,b) => a+b, 0);

        document.getElementById('text-results').innerHTML = `
            <div class="result-item">â€¢ ë¹„íŒì  ì‹¤ì¡´ì  ì‚¬ê³ : ${getLevel(avgScores.CET)}</div>
            <div class="result-item">â€¢ ê°œì¸ì  ì˜ë¯¸ ìƒì„±: ${getLevel(avgScores.PME)}</div>
            <div class="result-item">â€¢ ì´ˆì›”ì  ì¸ì‹: ${getLevel(avgScores.TA)}</div>
            <div class="result-item">â€¢ ì˜ì‹ ìƒíƒœ í™•ì¥: ${getLevel(avgScores.CSE)}</div>
        `;
        document.getElementById('total-score-display').innerText = `ë‹¹ì‹ ì˜ ì˜ì„±ì§€ëŠ¥(SI): ${totalScore} ì `;

        const ctx = document.getElementById('radarChart').getContext('2d');
        if(chartInstance) chartInstance.destroy();
        chartInstance = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['ìƒê°', 'ì˜ë¯¸', 'ì¸ì‹', 'í‰í™”'],
                datasets: [{
                    label: 'ë‚˜ì˜ ì˜ì„± ì ìˆ˜',
                    data: [avgScores.CET, avgScores.PME, avgScores.TA, avgScores.CSE],
                    backgroundColor: 'rgba(255, 138, 128, 0.4)',
                    borderColor: '#ff8a80',
                    pointBackgroundColor: '#d81b60'
                }]
            },
            options: { scales: { r: { min: 0, max: 5, ticks: { display: false } } } }
        });
    }

    function showGuide() {
        const factors = { CET:0, PME:0, TA:0, CSE:0 };
        userScores.forEach((s, i) => factors[questions[i].factor] += s);
        
        // ê°€ì¥ ë‚®ì€ ìš”ì¸ ì°¾ê¸° ë° ì½”ë©˜íŠ¸ ìƒì„±
        const minFactor = Object.keys(factors).reduce((a, b) => factors[a] < factors[b] ? a : b);
        let comment = "";
        
        switch(minFactor) {
            case 'CET': comment = "ì„¸ìƒê³¼ ë‚˜ì— ëŒ€í•´ ê¹Šì´ ê³ ë¯¼í•˜ëŠ” í˜ì„ ê¸°ë¥´ë©´ ë” ë©‹ì§„ ì‚¬ëŒì´ ë  ìˆ˜ ìˆì–´ìš”."; break;
            case 'PME': comment = "ì‘ì€ ì¼ì—ì„œë„ ì†Œì¤‘í•œ ì˜ë¯¸ì™€ ê¸°ì¨ì„ ì°¾ëŠ” ì—°ìŠµì´ ì¡°ê¸ˆ ë” í•„ìš”í•´ìš”."; break;
            case 'TA': comment = "ëˆˆì— ë³´ì´ì§€ ì•Šì§€ë§Œ ìš°ë¦¬ë¥¼ ì§€ì¼œì£¼ëŠ” í° ì‚¬ë‘ì„ ëŠë¼ëŠ” ì—°ìŠµì„ í•´ë´ìš”."; break;
            case 'CSE': comment = "ê¸°ë„ë‚˜ ì¡°ìš©í•œ ì‹œê°„ì„ í†µí•´ ë§ˆìŒì„ ì°¨ë¶„íˆ ê°€ë¼ì•‰íˆëŠ” í˜ì„ ê¸¸ëŸ¬ë³¼ê¹Œìš”?"; break;
        }

        document.getElementById('guide-content').innerHTML = `
            <p class="comment-text">"í˜„ì¬ ${comment}"</p>
            <p class="recommend-title">ğŸ“ ì•„ë˜ì™€ ê°™ì€ í›ˆë ¨ì„ ì¶”ì²œí•´ìš”.</p>
            <p><strong>ğŸ’­ ìƒê°:</strong> ê¸ì •ì ì¸ ìƒê°í•˜ê¸°</p>
            <p><strong>ğŸ™ ë¯¿ìŒ:</strong> ê°ì‚¬QT365 ë§ì”€ ì½ê¸°</p>
            <p><strong>ğŸŒˆ ê¿ˆ:</strong> í° ê·¸ë¦¼ ê·¸ë¦¬ê¸°</p>
            <p><strong>ğŸ’¬ ë§:</strong> ë§¤ì¼ ê°ì‚¬ 3ê°€ì§€ ì´ìƒ ì ê³  ê¸°ë„í•˜ê¸°</p>
        `;
    }

    function copyResult() {
        const total = userScores.reduce((a,b) => a+b, 0);
        const text = `[ìƒˆì‹¹ ì˜ì„±ì§€ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼]\nì´ì : ${total}ì \ní…ŒìŠ¤íŠ¸ ì™„ë£Œ!`;
        navigator.clipboard.writeText(text).then(() => alert("ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
    }
</script>
</body>
</html>